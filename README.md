# 💙 디스크 케어 일지

L4-5 디스크 환자를 위한 매일 건강 기록 웹 앱입니다.

## 📋 목차

1. [프로젝트 소개](#프로젝트-소개)
2. [주요 기능](#주요-기능)
3. [설치 및 배포](#설치-및-배포)
4. [사용 방법](#사용-방법)
5. [문제 해결](#문제-해결)

---

## 🎯 프로젝트 소개

이 앱은 디스크 환자가 매일 건강 상태를 체계적으로 기록하고, Google Sheets에 자동으로 저장하여 병원 재진 시 정확한 경과를 전달할 수 있도록 돕습니다.

### 기술 스택
- **프론트엔드**: HTML5, CSS3, Vanilla JavaScript
- **백엔드**: Google Apps Script (서버리스)
- **데이터 저장**: Google Sheets
- **호스팅**: GitHub Pages / Netlify (정적 파일)

---

## ✨ 주요 기능

### 1. 일일 건강 기록
- 📅 날짜별 기록
- 🩺 통증 점수 (0-10 슬라이더)
  - 기상 시 통증
  - 취침 전 통증
- 📍 통증 위치 (다중 선택)
- 🎯 통증 성격 (다중 선택)
- ⚠️ 다리 증상 모니터링
- 📝 활동 및 약물 기록

### 2. 안전 경고 시스템
- 다리 힘 빠짐 감지 시 즉시 경고
- 통증 8점 이상 3일 연속 시 경고
- 병원 상담 권장 메시지

### 3. 자동 데이터 저장
- Google Sheets에 실시간 저장
- 타임스탬프 자동 기록
- 고유 ID 생성 (UUID)

### 4. 반응형 디자인
- 모바일 우선 디자인
- 큰 터치 영역 (중장년층 배려)
- 고대비 색상 (접근성)

---

## 🚀 설치 및 배포

### 1단계: Google Sheets 설정

1. **새 스프레드시트 생성**
   - [Google Sheets](https://sheets.google.com) 접속
   - 새 스프레드시트 만들기

2. **시트명 변경**
   - 하단 탭에서 "Sheet1"을 "**일일기록**"으로 변경

3. **컬럼 헤더 입력** (첫 번째 행)
   ```
   A1: 타임스탬프
   B1: 날짜
   C1: 기상통증점수
   D1: 취침통증점수
   E1: 통증위치
   F1: 통증성격
   G1: 주요활동
   H1: 악화시점
   I1: 완화행동
   J1: 다리증상
   K1: 약물처치
   L1: 특이사항
   M1: 하루요약
   N1: 경고플래그
   O1: 기록ID
   ```

### 2단계: Google Apps Script 배포

1. **Apps Script 열기**
   - Google Sheets 메뉴: 확장 프로그램 → Apps Script

2. **코드 복사**
   - `apps-script/Code.gs` 파일 내용 전체를 복사
   - Apps Script 편집기에 붙여넣기

3. **배포하기**
   - 상단 메뉴: 배포 → 새 배포
   - 유형 선택: "웹 앱"
   - 설정:
     - 설명: "디스크 케어 일지 백엔드"
     - 실행 권한: "나"
     - 액세스 권한: **"모든 사용자"** ⚠️ 중요!
   - "배포" 버튼 클릭

4. **배포 URL 복사**
   - 배포 완료 후 나타나는 **웹 앱 URL**을 복사
   - 예: `https://script.google.com/macros/s/AKfycb.../exec`

### 3단계: 웹 앱 설정

1. **배포 URL 설정**
   - `js/form.js` 파일 열기
   - 2번째 줄의 `SCRIPT_URL` 변수에 복사한 URL 붙여넣기
   ```javascript
   const SCRIPT_URL = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';
   ```

### 4단계: 웹 호스팅 (선택)

#### Option A: GitHub Pages (무료, 권장)

1. GitHub 저장소 생성
2. 모든 파일 업로드 (apps-script 폴더 제외)
3. Settings → Pages → Source: main branch
4. 배포된 URL로 접속

#### Option B: Netlify (무료)

1. [Netlify](https://netlify.com) 가입
2. "New site from Git" 또는 파일 드래그 앤 드롭
3. 자동 배포 완료

#### Option C: 로컬 파일로 실행

1. `index.html` 파일을 브라우저로 드래그
2. 또는 파일 더블 클릭하여 열기
3. ⚠️ 단, CORS 문제로 Apps Script 연동이 안 될 수 있음

---

## 📱 사용 방법

### 매일 기록하기

1. **웹 앱 접속**
   - 브라우저에서 배포된 URL 접속
   - 또는 `index.html` 파일 열기

2. **기록 입력**
   - 📅 날짜 선택 (기본값: 오늘)
   - 🌅 기상 시 통증 점수 슬라이더 조절
   - 🌙 취침 전 통증 점수 슬라이더 조절
   - 📍 통증 위치 선택 (여러 개 가능)
   - 🎯 통증 느낌 선택 (여러 개 가능)
   - ⚠️ 다리 증상 선택 (하나만)
   - 📝 활동, 악화 시점, 완화 방법 입력
   - 💊 약물 복용 기록
   - ✏️ 하루 요약 작성

3. **저장하기**
   - "기록 저장하기" 버튼 클릭
   - 성공 메시지 확인
   - Google Sheets에 자동 저장됨

4. **경고 확인**
   - 다리 힘 빠짐 선택 시 즉시 경고
   - 통증 8점 이상 시 주의 메시지

### Google Sheets에서 데이터 확인

1. Google Sheets 열기
2. "일일기록" 시트 탭 선택
3. 기록된 데이터 확인
4. 필요 시 차트 생성 (삽입 → 차트)

### 모바일 홈 화면에 추가 (권장)

#### iPhone (Safari)

1. Safari에서 웹 앱 열기
2. 하단 공유 버튼 탭
3. "홈 화면에 추가" 선택
4. 이름 입력 후 추가
5. 홈 화면에서 앱처럼 실행

#### Android (Chrome)

1. Chrome에서 웹 앱 열기
2. 메뉴 버튼 (⋮) 탭
3. "홈 화면에 추가" 선택
4. 이름 입력 후 추가
5. 홈 화면에서 앱처럼 실행

---

## 🔧 문제 해결

### 1. 데이터가 Google Sheets에 저장되지 않아요

**원인**: Apps Script URL이 설정되지 않았거나 잘못됨

**해결방법**:
1. `js/form.js` 파일 확인
2. `SCRIPT_URL` 변수에 정확한 배포 URL 입력
3. URL 형식: `https://script.google.com/macros/s/.../exec`
4. 브라우저 새로고침 후 다시 시도

### 2. "모든 사용자" 액세스 권한 오류

**원인**: Apps Script 배포 시 액세스 권한을 "나"로 설정

**해결방법**:
1. Apps Script 편집기 열기
2. 배포 → 배포 관리
3. 기존 배포 편집
4. 액세스 권한을 **"모든 사용자"**로 변경
5. 새 배포 URL 복사 후 `form.js`에 업데이트

### 3. 슬라이더가 움직이지 않아요

**원인**: JavaScript 파일 로딩 실패

**해결방법**:
1. 브라우저 개발자 도구 열기 (F12)
2. Console 탭에서 오류 확인
3. `js/form.js`와 `js/validation.js` 경로 확인
4. 파일이 올바른 위치에 있는지 확인

### 4. 모바일에서 터치가 안 돼요

**원인**: CSS 파일 로딩 실패

**해결방법**:
1. `css/styles.css` 파일 존재 확인
2. `index.html`에서 CSS 경로 확인
3. 브라우저 새로고침 (강제: Ctrl+F5)

### 5. 경고 메시지가 표시되지 않아요

**원인**: Apps Script 안전 경고 로직 미작동

**해결방법**:
1. Google Sheets에서 "경고플래그" 컬럼 확인
2. "힘 빠짐" 선택 시 `LEG_WEAKNESS` 값 확인
3. Apps Script 로그 확인: 실행 로그 보기

### 6. 날짜가 이상하게 저장돼요

**원인**: 시간대 설정 문제

**해결방법**:
1. `apps-script/Code.gs` 확인
2. `Utilities.formatDate()` 함수의 시간대가 `'Asia/Seoul'`인지 확인

---

## 📊 데이터 활용 팁

### 1. 병원 재진 시 준비

Google Sheets에서 다음 데이터 확인:
- 통증 점수 추이 (C, D 컬럼)
- 약물 복용 패턴 (K 컬럼)
- 악화 트리거 빈도 (H 컬럼)
- 종아리 방사통 변화 (E 컬럼에서 "종아리" 검색)

### 2. 간단한 차트 만들기

1. Google Sheets 메뉴: 삽입 → 차트
2. 차트 유형: 꺾은선형 그래프
3. X축: B 컬럼 (날짜)
4. Y축: C, D 컬럼 (통증 점수)
5. 차트 제목: "통증 점수 추이"

### 3. 데이터 필터링

1. 첫 행 선택 → 데이터 → 필터 만들기
2. "다리증상" 컬럼에서 "힘 빠짐" 필터
3. "경고플래그" 컬럼에서 경고 발생 날짜만 보기

---

## 🔒 보안 및 개인정보

### 주의사항

1. **Apps Script URL 공유 금지**
   - URL을 알면 누구나 데이터 추가 가능
   - 타인과 URL 공유하지 마세요

2. **Google Sheets 공유 설정**
   - 본인만 편집 가능하도록 설정
   - 민감 정보 포함 주의

3. **백업**
   - Google Sheets: 파일 → 사본 만들기
   - 월 1회 백업 권장

---

## 📞 지원 및 문의

- **제작자**: 강수근
- **목적**: 아내(안미라)의 L4-5 디스크 회복 지원
- **라이선스**: 개인 사용

---

## 💙 마무리

매일 꾸준히 기록하여 빠른 쾌유를 기원합니다!

건강 상태가 악화되거나 긴급한 증상이 나타나면 즉시 병원에 연락하세요.

---

**버전**: 1.0.0
**최종 업데이트**: 2026-02-11
